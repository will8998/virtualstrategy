module.exports=[629782,a=>{"use strict";a.s(["ccipRequest",()=>s,"offchainLookup",()=>r,"offchainLookupAbiItem",()=>q,"offchainLookupSignature",()=>p],629782);var b=a.i(787216),c=a.i(130557),d=a.i(185228),e=a.i(2650);class f extends d.BaseError{constructor({callbackSelector:a,cause:b,data:c,extraData:d,sender:f,urls:g}){super(b.shortMessage||"An error occurred while fetching for an offchain result.",{cause:b,metaMessages:[...b.metaMessages||[],b.metaMessages?.length?"":[],"Offchain Gateway Call:",g&&["  Gateway URL(s):",...g.map(a=>`    ${(0,e.getUrl)(a)}`)],`  Sender: ${f}`,`  Data: ${c}`,`  Callback selector: ${a}`,`  Extra data: ${d}`].flat(),name:"OffchainLookupError"})}}class g extends d.BaseError{constructor({result:a,url:b}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${(0,e.getUrl)(b)}`,`Response: ${(0,c.stringify)(a)}`],name:"OffchainLookupResponseMalformedError"})}}class h extends d.BaseError{constructor({sender:a,to:b}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${b}`,`OffchainLookup sender address: ${a}`],name:"OffchainLookupSenderMismatchError"})}}var i=a.i(21374),j=a.i(984929),k=a.i(762029),l=a.i(161848),m=a.i(429664),n=a.i(748894),o=a.i(353821);let p="0x556f1830",q={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function r(a,{blockNumber:c,blockTag:d,data:e,to:g}){let{args:i}=(0,j.decodeErrorResult)({data:e,abi:[q]}),[n,p,r,t,u]=i,{ccipRead:v}=a,w=v&&"function"==typeof v?.request?v.request:s;try{if(!(0,l.isAddressEqual)(g,n))throw new h({sender:n,to:g});let e=p.includes(o.localBatchGatewayUrl)?await (0,o.localBatchGatewayRequest)({data:r,ccipRequest:w}):await w({data:r,sender:n,urls:p}),{data:f}=await (0,b.call)(a,{blockNumber:c,blockTag:d,data:(0,m.concat)([t,(0,k.encodeAbiParameters)([{type:"bytes"},{type:"bytes"}],[e,u])]),to:g});return f}catch(a){throw new f({callbackSelector:t,cause:a,data:e,extraData:u,sender:n,urls:p})}}async function s({data:a,sender:b,urls:d}){let e=Error("An unknown error occurred.");for(let f=0;f<d.length;f++){let h=d[f],j=h.includes("{data}")?"GET":"POST",k="POST"===j?{data:a,sender:b}:void 0,l="POST"===j?{"Content-Type":"application/json"}:{};try{let d,f=await fetch(h.replace("{sender}",b.toLowerCase()).replace("{data}",a),{body:JSON.stringify(k),headers:l,method:j});if(d=f.headers.get("Content-Type")?.startsWith("application/json")?(await f.json()).data:await f.text(),!f.ok){e=new i.HttpRequestError({body:k,details:d?.error?(0,c.stringify)(d.error):f.statusText,headers:f.headers,status:f.status,url:h});continue}if(!(0,n.isHex)(d)){e=new g({result:d,url:h});continue}return d}catch(a){e=new i.HttpRequestError({body:k,details:a.message,url:h})}}throw e}}];

//# sourceMappingURL=node_modules_viem__esm_utils_ccip_954a822e.js.map