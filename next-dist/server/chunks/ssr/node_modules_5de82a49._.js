module.exports=[404703,a=>{"use strict";let b;function c(a){return new Promise((b,c)=>{a.oncomplete=a.onsuccess=()=>b(a.result),a.onabort=a.onerror=()=>c(a.error)})}function d(a,b){let d=indexedDB.open(a);d.onupgradeneeded=()=>d.result.createObjectStore(b);let e=c(d);return(a,c)=>e.then(d=>c(d.transaction(b,a).objectStore(b)))}function e(){return b||(b=d("keyval-store","keyval")),b}function f(a,b=e()){return b("readonly",b=>c(b.get(a)))}function g(a,b,d=e()){return d("readwrite",d=>(d.put(b,a),c(d.transaction)))}function h(a,b=e()){return b("readwrite",b=>(b.delete(a),c(b.transaction)))}function i(a=e()){return a("readwrite",a=>(a.clear(),c(a.transaction)))}function j(a=e()){return a("readonly",a=>{var b;if(a.getAllKeys)return c(a.getAllKeys());let d=[];return(b=a=>d.push(a.key),a.openCursor().onsuccess=function(){this.result&&(b(this.result),this.result.continue())},c(a.transaction)).then(()=>d)})}a.s(["clear",()=>i,"createStore",()=>d,"del",()=>h,"get",()=>f,"keys",()=>j,"set",()=>g])},742031,99783,a=>{"use strict";a.s(["prepareAuthorization",()=>h],742031);var b=a.i(134510),c=a.i(770548),d=a.i(161848),e=a.i(709987),f=a.i(600528),g=a.i(473579);async function h(a,h){let{account:i=a.account,chainId:j,nonce:k}=h;if(!i)throw new c.AccountNotFoundError({docsPath:"/docs/eip7702/prepareAuthorization"});let l=(0,b.parseAccount)(i),m=(()=>{if(h.executor)return"self"===h.executor?h.executor:(0,b.parseAccount)(h.executor)})(),n={address:h.contractAddress??h.address,chainId:j,nonce:k};return void 0===n.chainId&&(n.chainId=a.chain?.id??await (0,e.getAction)(a,f.getChainId,"getChainId")({})),void 0===n.nonce&&(n.nonce=await (0,e.getAction)(a,g.getTransactionCount,"getTransactionCount")({address:l.address,blockTag:"pending"}),("self"===m||m?.address&&(0,d.isAddressEqual)(m.address,l.address))&&(n.nonce+=1)),n}a.s(["BundleFailedError",()=>j],99783);var i=a.i(185228);class j extends i.BaseError{constructor(a){super(`Call bundle failed with status: ${a.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=a}}},197693,a=>{"use strict";a.s(["getTransactionError",()=>e]);var b=a.i(762940),c=a.i(58433),d=a.i(644137);function e(a,{docsPath:e,...f}){let g=(()=>{let c=(0,d.getNodeError)(a,f);return c instanceof b.UnknownNodeError?a:c})();return new c.TransactionExecutionError(g,{docsPath:e,...f})}},88963,a=>{"use strict";a.s(["assertCurrentChain",()=>c]);var b=a.i(407907);function c({chain:a,currentChainId:c}){if(!a)throw new b.ChainNotFoundError;if(c!==a.id)throw new b.ChainMismatchError({chain:a,currentChainId:c})}},130573,567218,486007,a=>{"use strict";a.s(["getCallsStatus",()=>C],130573);var b=a.i(323360),c=a.i(946294),d=a.i(74116),e=a.i(111755);a.s(["fallbackMagicIdentifier",()=>z,"fallbackTransactionErrorMagicIdentifier",()=>A,"sendCalls",()=>B],486007);var f=a.i(134510),g=a.i(185228),h=a.i(282271),i=a.i(59854),j=a.i(429664),k=a.i(221570),l=a.i(197693);a.s(["sendTransaction",()=>y],567218);var m=a.i(770548),n=a.i(420419),o=a.i(88963),p=a.i(216200),q=a.i(637998),r=a.i(709987),s=a.i(954170),t=a.i(745914),u=a.i(600528),v=a.i(366451),w=a.i(158413);let x=new s.LruMap(128);async function y(a,b){let{account:c=a.account,chain:d=a.chain,accessList:e,authorizationList:h,blobs:i,data:j,gas:k,gasPrice:s,maxFeePerBlobGas:y,maxFeePerGas:z,maxPriorityFeePerGas:A,nonce:B,type:C,value:D,...E}=b;if(void 0===c)throw new m.AccountNotFoundError({docsPath:"/docs/actions/wallet/sendTransaction"});let F=c?(0,f.parseAccount)(c):null;try{(0,t.assertRequest)(b);let c=await (async()=>b.to?b.to:null!==b.to&&h&&h.length>0?await (0,n.recoverAuthorizationAddress)({authorization:h[0]}).catch(()=>{throw new g.BaseError("`to` is required. Could not infer from `authorizationList`.")}):void 0)();if(F?.type==="json-rpc"||null===F){let b;null!==d&&(b=await (0,r.getAction)(a,u.getChainId,"getChainId")({}),(0,o.assertCurrentChain)({currentChainId:b,chain:d}));let f=a.chain?.formatters?.transactionRequest?.format,g=(f||q.formatTransactionRequest)({...(0,p.extract)(E,{format:f}),accessList:e,authorizationList:h,blobs:i,chainId:b,data:j,from:F?.address,gas:k,gasPrice:s,maxFeePerBlobGas:y,maxFeePerGas:z,maxPriorityFeePerGas:A,nonce:B,to:c,type:C,value:D}),l=x.get(a.uid);try{return await a.request({method:l?"wallet_sendTransaction":"eth_sendTransaction",params:[g]},{retryCount:0})}catch(b){if(!1===l)throw b;if("InvalidInputRpcError"===b.name||"InvalidParamsRpcError"===b.name||"MethodNotFoundRpcError"===b.name||"MethodNotSupportedRpcError"===b.name)return await a.request({method:"wallet_sendTransaction",params:[g]},{retryCount:0}).then(b=>(x.set(a.uid,!0),b)).catch(c=>{if("MethodNotFoundRpcError"===c.name||"MethodNotSupportedRpcError"===c.name)throw x.set(a.uid,!1),b;throw c});throw b}}if(F?.type==="local"){let b=await (0,r.getAction)(a,v.prepareTransactionRequest,"prepareTransactionRequest")({account:F,accessList:e,authorizationList:h,blobs:i,chain:d,data:j,gas:k,gasPrice:s,maxFeePerBlobGas:y,maxFeePerGas:z,maxPriorityFeePerGas:A,nonce:B,nonceManager:F.nonceManager,parameters:[...v.defaultParameters,"sidecars"],type:C,value:D,...E,to:c}),f=d?.serializers?.transaction,g=await F.signTransaction(b,{serializer:f});return await (0,r.getAction)(a,w.sendRawTransaction,"sendRawTransaction")({serializedTransaction:g})}if(F?.type==="smart")throw new m.AccountTypeNotSupportedError({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"});throw new m.AccountTypeNotSupportedError({docsPath:"/docs/actions/wallet/sendTransaction",type:F?.type})}catch(a){if(a instanceof m.AccountTypeNotSupportedError)throw a;throw(0,l.getTransactionError)(a,{...b,account:F,chain:b.chain||void 0})}}let z="0x5792579257925792579257925792579257925792579257925792579257925792",A=(0,k.numberToHex)(0,{size:32});async function B(a,b){let{account:c=a.account,capabilities:e,chain:m=a.chain,experimental_fallback:n,experimental_fallbackDelay:o=32,forceAtomic:p=!1,id:q,version:r="2.0.0"}=b,s=c?(0,f.parseAccount)(c):null,t=b.calls.map(a=>{let b=a.abi?(0,i.encodeFunctionData)({abi:a.abi,functionName:a.functionName,args:a.args}):a.data;return{data:a.dataSuffix&&b?(0,j.concat)([b,a.dataSuffix]):b,to:a.to,value:a.value?(0,k.numberToHex)(a.value):void 0}});try{let b=await a.request({method:"wallet_sendCalls",params:[{atomicRequired:p,calls:t,capabilities:e,chainId:(0,k.numberToHex)(m.id),from:s?.address,id:q,version:r}]},{retryCount:0});if("string"==typeof b)return{id:b};return b}catch(c){if(n&&("MethodNotFoundRpcError"===c.name||"MethodNotSupportedRpcError"===c.name||"UnknownRpcError"===c.name||c.details.toLowerCase().includes("does not exist / is not available")||c.details.toLowerCase().includes("missing or invalid. request()")||c.details.toLowerCase().includes("did not match any variant of untagged enum")||c.details.toLowerCase().includes("account upgraded to unsupported contract")||c.details.toLowerCase().includes("eip-7702 not supported")||c.details.toLowerCase().includes("unsupported wc_ method")||c.details.toLowerCase().includes("feature toggled misconfigured"))){if(e&&Object.values(e).some(a=>!a.optional)){let a="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new h.UnsupportedNonOptionalCapabilityError(new g.BaseError(a,{details:a}))}if(p&&t.length>1){let a="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new h.AtomicityNotSupportedError(new g.BaseError(a,{details:a}))}let b=[];for(let c of t){let e=y(a,{account:s,chain:m,data:c.data,to:c.to,value:c.value?(0,d.hexToBigInt)(c.value):void 0});b.push(e),o>0&&await new Promise(a=>setTimeout(a,o))}let c=await Promise.allSettled(b);if(c.every(a=>"rejected"===a.status))throw c[0].reason;let f=c.map(a=>"fulfilled"===a.status?a.value:A);return{id:(0,j.concat)([...f,(0,k.numberToHex)(m.id,{size:32}),z])}}throw(0,l.getTransactionError)(c,{...b,account:s,chain:b.chain})}}async function C(a,f){async function g(e){if(e.endsWith(z.slice(2))){let f=(0,c.trim)((0,b.sliceHex)(e,-64,-32)),g=(0,b.sliceHex)(e,0,-64).slice(2).match(/.{1,64}/g),h=await Promise.all(g.map(b=>A.slice(2)!==b?a.request({method:"eth_getTransactionReceipt",params:[`0x${b}`]},{dedupe:!0}):void 0)),i=h.some(a=>null===a)?100:h.every(a=>a?.status==="0x1")?200:h.every(a=>a?.status==="0x0")?500:600;return{atomic:!1,chainId:(0,d.hexToNumber)(f),receipts:h.filter(Boolean),status:i,version:"2.0.0"}}return a.request({method:"wallet_getCallsStatus",params:[e]})}let{atomic:h=!1,chainId:i,receipts:j,version:k="2.0.0",...l}=await g(f.id),[m,n]=(()=>{let a=l.status;return a>=100&&a<200?["pending",a]:a>=200&&a<300?["success",a]:a>=300&&a<700?["failure",a]:"CONFIRMED"===a?["success",200]:"PENDING"===a?["pending",100]:[void 0,a]})();return{...l,atomic:h,chainId:i?(0,d.hexToNumber)(i):void 0,receipts:j?.map(a=>({...a,blockNumber:(0,d.hexToBigInt)(a.blockNumber),gasUsed:(0,d.hexToBigInt)(a.gasUsed),status:e.receiptStatuses[a.status]}))??[],statusCode:n,status:m,version:k}}},526629,a=>{"use strict";a.s(["waitForCallsStatus",()=>k]);var b=a.i(185228),c=a.i(99783),d=a.i(709987),e=a.i(375037),f=a.i(297472),g=a.i(246564),h=a.i(548855),i=a.i(130557),j=a.i(130573);async function k(a,b){let k,{id:m,pollingInterval:n=a.pollingInterval,status:o=({statusCode:a})=>200===a||a>=300,retryCount:p=4,retryDelay:q=({count:a})=>200*~~(1<<a),timeout:r=6e4,throwOnFailure:s=!1}=b,t=(0,i.stringify)(["waitForCallsStatus",a.uid,m]),{promise:u,resolve:v,reject:w}=(0,g.withResolvers)(),x=(0,e.observe)(t,{resolve:v,reject:w},b=>{let e=(0,f.poll)(async()=>{let f=a=>{clearTimeout(k),e(),a(),x()};try{let e=await (0,h.withRetry)(async()=>{let b=await (0,d.getAction)(a,j.getCallsStatus,"getCallsStatus")({id:m});if(s&&"failure"===b.status)throw new c.BundleFailedError(b);return b},{retryCount:p,delay:q});if(!o(e))return;f(()=>b.resolve(e))}catch(a){f(()=>b.reject(a))}},{interval:n,emitOnBegin:!0});return e});return k=r?setTimeout(()=>{x(),clearTimeout(k),w(new l({id:m}))},r):void 0,await u}class l extends b.BaseError{constructor({id:a}){super(`Timed out while waiting for call bundle with id "${a}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}}];

//# sourceMappingURL=node_modules_5de82a49._.js.map